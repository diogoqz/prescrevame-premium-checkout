<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Timer PIX</title>
    <style>
        :root {
            --warning-orange: #FF9800;
            --error-red: #f44336;
        }
        
        .countdown {
            font-size: 18px;
            font-weight: 600;
            color: var(--warning-orange);
            margin: 16px 0;
            padding: 12px 16px;
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-radius: 12px;
            border: 2px solid var(--warning-orange);
            box-shadow: 0 2px 8px rgba(255, 152, 0, 0.2);
            transition: all 0.3s ease;
        }

        .countdown.expired {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            border-color: var(--error-red);
            color: var(--error-red);
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <h1>üåµ Teste Timer PIX</h1>
    
    <div class="countdown" id="countdown">
        <div style="display: flex; align-items: center; justify-content: center; gap: 8px;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
            </svg>
            <span>PIX expira em:</span>
            <span id="countdown-timer" style="font-weight: 700; color: var(--warning-orange);">05:00</span>
        </div>
    </div>

    <div id="payment-status" class="status-message">
        ‚è≥ Aguardando pagamento...
    </div>

    <button onclick="startTestTimer()">Iniciar Timer de Teste (5 min)</button>
    <button onclick="startShortTimer()">Timer Curto (30 seg)</button>

    <script>
        let countdown = 0;
        let isExpired = false;
        let countdownInterval = null;
        
        function updateCountdown() {
            if (countdown <= 0 || isExpired) {
                const countdownElement = document.getElementById('countdown');
                if (countdownElement) {
                    countdownElement.classList.add('expired');
                    countdownElement.innerHTML = `
                        <div style="display: flex; align-items: center; justify-content: center; gap: 8px;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            <span>PIX expirado!</span>
                        </div>
                    `;
                }
                
                const statusElement = document.getElementById('payment-status');
                if (statusElement) {
                    statusElement.innerHTML = 
                        '‚ùå PIX expirado. <a href="#" style="color: var(--primary-green); font-weight: 600;">Clique aqui para gerar um novo c√≥digo</a>';
                    statusElement.style.color = 'var(--error-red)';
                    statusElement.style.background = '#f8d7da';
                    statusElement.style.border = '1px solid #f5c6cb';
                }
                
                if (countdownInterval) {
                    clearInterval(countdownInterval);
                }
                return;
            }
            
            const minutes = Math.floor(countdown / 60);
            const seconds = countdown % 60;
            const timeString = minutes + ':' + seconds.toString().padStart(2, '0');
            
            const timerElement = document.getElementById('countdown-timer');
            if (timerElement) {
                timerElement.textContent = timeString;
                
                // Mudar cor conforme o tempo restante
                if (countdown <= 300) { // √öltimos 5 minutos
                    timerElement.style.color = 'var(--error-red)';
                    timerElement.style.animation = 'pulse 1s infinite';
                } else if (countdown <= 600) { // √öltimos 10 minutos
                    timerElement.style.color = 'var(--warning-orange)';
                } else {
                    timerElement.style.color = 'var(--warning-orange)';
                }
            }
            
            countdown--;
        }
        
        function startCountdown(seconds) {
            countdown = seconds;
            isExpired = false;
            
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }
            
            countdownInterval = setInterval(updateCountdown, 1000);
            updateCountdown();
            
            // Verificar se j√° expirou
            if (countdown <= 0) {
                isExpired = true;
                updateCountdown();
            }
        }
        
        function startTestTimer() {
            startCountdown(300); // 5 minutos
        }
        
        function startShortTimer() {
            startCountdown(30); // 30 segundos
        }
        
        // Iniciar timer de teste automaticamente
        window.onload = function() {
            startCountdown(300); // 5 minutos
        };
    </script>
</body>
</html>
